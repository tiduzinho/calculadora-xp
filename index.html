<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculadora de XP - Priston Tale</title>
    <style>
        body { font-family: sans-serif; background-color: #2c2c2c; color: #f0f0f0; max-width: 700px; margin: 20px auto; padding: 20px; border-radius: 8px; }
        h1, h2 { text-align: center; color: #ffc107; }
        .input-group, .quest-group { margin-bottom: 15px; }
        label { display: block; margin-bottom: 5px; }
        input[type="number"] { width: 100%; padding: 8px; box-sizing: border-box; background-color: #3c3c3c; color: #f0f0f0; border: 1px solid #555; border-radius: 4px; }
        .bonus-group { background-color: #3c3c3c; padding: 10px 15px; border-radius: 4px; display: flex; align-items: center; margin-bottom: 20px; }
        .bonus-group label { margin: 0; margin-left: 10px; cursor: pointer; }
        .converter-group { background-color: #3c3c3c; padding: 15px; border-radius: 4px; margin-bottom: 20px; }
        .quest-list { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }
        .quest-item input[type="checkbox"] { display: none; }
        .quest-item label { display: flex; align-items: center; background-color: #3c3c3c; padding: 10px; border-radius: 4px; cursor: pointer; transition: all 0.2s ease-in-out; border: 2px solid #3c3c3c; }
        .quest-item label:hover { background-color: #4c4c4c; border-color: #555; }
        .quest-level-badge { background-color: #555; color: #ffc107; padding: 4px 8px; border-radius: 4px; font-weight: bold; margin-right: 10px; font-size: 14px; }
        .quest-name { font-size: 14px; color: #f0f0f0; }
        .quest-item input[type="checkbox"]:checked + label { border-color: #ffc107; background-color: #444; }
        .quest-item input[type="checkbox"]:checked + label .quest-level-badge { background-color: #ffc107; color: #2c2c2c; }
        button { width: 100%; margin-top: 10px; padding: 12px; font-size: 16px; background-color: #ffc107; color: #2c2c2c; border: none; border-radius: 4px; cursor: pointer; font-weight: bold; transition: background-color 0.2s; }
        button:hover { background-color: #ffca2c; }
        #results, #conversionResult { margin-top: 20px; background-color: #303030; padding: 15px; border-radius: 4px; text-align: center; }
        #results h2, .converter-group h2 { margin-top: 0; }
        #results p { margin: 10px 0; font-size: 1.1em; }
        .total-gain { font-size: 1.3em; font-weight: bold; color: #4caf50; }
        .credits { text-align: center; margin-top: 30px; font-size: 0.9em; color: #888; }
    </style>
</head>
<body>

    <h1>Calculadora de XP</h1>

    <div class="input-group">
        <label for="levelInput">Seu Nível:</label>
        <input type="number" id="levelInput" placeholder="Insira o nível aqui">
    </div>

    <div class="bonus-group">
        <input type="checkbox" id="premiumBonus">
        <label for="premiumBonus">Serviço Premium (+20%)</label>
    </div>
    
    <div class="converter-group">
        <h2>Conversor de XP para %</h2>
        <div class="input-group">
            <label for="xpToConvertInput">Quantidade de XP:</label>
            <input type="number" id="xpToConvertInput" placeholder="Ex: 50000000000">
        </div>
        <button onclick="convertXP()">Converter</button>
        <div id="conversionResult" style="display:none;"></div>
    </div>

    <div class="quest-group">
        <h2>Selecione as Quests:</h2>
        <div class="quest-list" id="questList">
        </div>
    </div>

    <button onclick="calculateXP()">Calcular Ganho das Quests</button>

    <div id="results" style="display: none;">
        <h2>Resultado das Quests</h2>
        <p id="gainText1x"></p>
        <p id="gainText4x"></p>
    </div>
    
    <div class="credits">
        Créditos: TiduzinhO
    </div>

<script>
    // --- BANCO DE DADOS ---
    const xpTable = { 80: 225148692, 81: 252000000, 82: 283000000, 83: 317000000, 84: 355000000, 85: 397000000, 86: 445000000, 87: 498000000, 88: 559000000, 89: 1042000000, 90: 1250000000, 91: 1501000000, 92: 1800000000, 93: 2161000000, 94: 2593000000, 95: 3112000000, 96: 3733000000, 97: 4481000000, 98: 5377000000, 99: 6452000000, 100: 7742000000, 101: 9291000000, 102: 11149000000, 103: 13379000000, 104: 16055000000, 105: 19266000000, 106: 23118000000, 107: 27743000000, 108: 33291000000, 109: 39949000000, 110: 47940000000, 111: 57527000000, 112: 69032000000, 113: 82839000000, 114: 99407000000, 115: 119288000000, 116: 143146000000, 117: 171775000000, 118: 206130000000, 119: 247355000000, 120: 222620000000, 121: 256013000000, 122: 294415000000, 123: 338578000000, 124: 389364000000, 125: 437769000000, 126: 524934000000, 127: 592174000000, 128: 681000000000, 129: 678730000000, 130: 766965000000, 131: 866671000000, 132: 979337000000, 133: 1106652000000, 134: 1250516000000, 135: 1413084000000, 136: 1596785000000, 137: 1804367000000, 138: 2038935000000, 139: 1949532000000, 140: 2163983000000, 141: 2402022000000, 142: 2666244000000, 143: 2959530000000, 144: 3285079000000, 145: 3646438000000, 146: 4047546000000, 147: 4492776000000, 148: 4986981000000, 149: 5535549000000, 150: 7261634000000, 151: 8205647000000, 152: 9272380000000, 153: 10477790000000, 154: 11839903000000, 155: 13379090000000, 156: 15118372000000, 157: 17083760000000, 158: 19304649000000, 159: 21814253000000, 160: 26546269000000, 161: 32424370000000, 162: 39773895000000, 163: 49021325000000, 164: 60728771000000, 165: 75641057000000, 166: 94750378000000, 167: 119385476000000, 168: 151335304000000, 169: 184629070000000, 170: 266201550000000, 171: 387016100000000, 172: 553432234000000, 173: 780676000000000, 174: 1114136000000000, 175: 1608873000000000, 176: 2351017000000000, 177: 3395786000000000, 178: 4936826000000000, 179: 7223839000000000, 180: 10706202000000000, 181: 15768968847000000, 182: 24021200153000000, 183: 35550888813000000, 184: 54810952530000000, 185: 82216428795000000, 186: 125798348606000000, 187: 188697522909000000, 188: 300055207748000000, 189: 467746348486000000, 190: 713943348287000000 };
    const questData = [ { level: 80, name: "Máquinas de Combate", xp: 513480000 }, { level: 85, name: "Engrenagens do Destino", xp: 757680000 }, { level: 90, name: "Entrando Numa Fria", xp: 1082730000 }, { level: 95, name: "Combate na Ilha", xp: 3730320000 }, { level: 100, name: "Aberrações Mortais", xp: 7818582000 }, { level: 105, name: "Guerreiros do Passado", xp: 18117000000 }, { level: 108, name: "Guardiões Igolanos", xp: 20164608000 }, { level: 110, name: "Combate Congelante", xp: 33766200000 }, { level: 118, name: "Máquinas das Trevas", xp: 41496000000 }, { level: 123, name: "Protetores da Arma", xp: 69949440000 }, { level: 130, name: "O Mundo Sombrio", xp: 84779847000 }, { level: 140, name: "Descobrindo as Profundezas", xp: 149527186050 }, { level: 150, name: "Confronto sob as Águas", xp: 165966682200 }, { level: 155, name: "Ruínas da Cidade Antiga", xp: 173553511312 }, { level: 160, name: "Covil do Dragão de Gelo", xp: 184546793062 }, { level: 165, name: "O Recomeço da Guerra", xp: 219560137500 }, { level: 170, name: "Salve o Reino do Mar", xp: 265962910714 } ];

    // --- LÓGICA DO APP ---

    document.addEventListener('DOMContentLoaded', function() {
        const questListDiv = document.getElementById('questList');
        questData.forEach(quest => {
            const questId = `quest-${quest.level}`;
            const questItem = document.createElement('div');
            questItem.className = 'quest-item';
            questItem.innerHTML = `<input type="checkbox" id="${questId}" data-xp="${quest.xp}"><label for="${questId}"><span class="quest-level-badge">${quest.level}</span><span class="quest-name">${quest.name}</span></label>`;
            questListDiv.appendChild(questItem);
        });
    });

    function getCommonInputs() {
        const level = parseInt(document.getElementById('levelInput').value);
        if (!level) {
            alert('Por favor, insira o seu nível.');
            return null;
        }

        const xpNeeded = xpTable[level];
        if (!xpNeeded) {
            alert('Nível não encontrado na tabela de XP. A tabela atual vai do 80 ao 190.');
            return null;
        }
        
        const premiumCheckbox = document.getElementById('premiumBonus');
        const bonus = premiumCheckbox.checked ? 20 : 0;
        const bonusMultiplier = 1 + (bonus / 100);

        return { level, xpNeeded, bonus, bonusMultiplier };
    }

    function convertXP() {
        const inputs = getCommonInputs();
        if (!inputs) return;

        const xpToConvert = parseFloat(document.getElementById('xpToConvertInput').value);
        if (!xpToConvert || xpToConvert <= 0) {
            alert('Por favor, insira uma quantidade de XP válida para converter.');
            return;
        }
        
        const xpWithBonus = xpToConvert * inputs.bonusMultiplier;
        const percentage = (xpWithBonus / inputs.xpNeeded) * 100;

        const resultDiv = document.getElementById('conversionResult');
        resultDiv.innerHTML = `Resultado: <span class="total-gain">${percentage.toFixed(2)}%</span> ${inputs.bonus > 0 ? '(com bônus)' : '(sem bônus)'}`;
        resultDiv.style.display = 'block';
    }

    function calculateXP() {
        const inputs = getCommonInputs();
        if (!inputs) return;

        let totalXPGained_1x = 0;
        const selectedQuests = document.querySelectorAll('#questList input[type="checkbox"]:checked');

        if (selectedQuests.length === 0) {
            alert('Por favor, selecione pelo menos uma quest.');
            return;
        }

        selectedQuests.forEach(checkbox => {
            totalXPGained_1x += parseFloat(checkbox.getAttribute('data-xp'));
        });
        
        const totalXPGained_4x = totalXPGained_1x * 4;

        const finalXPGain_1x = totalXPGained_1x * inputs.bonusMultiplier;
        const finalXPGain_4x = totalXPGained_4x * inputs.bonusMultiplier;

        const percentageGain_1x = (finalXPGain_1x / inputs.xpNeeded) * 100;
        const percentageGain_4x = (finalXPGain_4x / inputs.xpNeeded) * 100;

        const resultsDiv = document.getElementById('results');
        const gainText1x = document.getElementById('gainText1x');
        const gainText4x = document.getElementById('gainText4x');
        
        gainText1x.innerHTML = `Ganho (1 vez): <span class="total-gain">${percentageGain_1x.toFixed(2)}%</span>`;
        gainText4x.innerHTML = `Ganho Total (4 vezes): <span class="total-gain">${percentageGain_4x.toFixed(2)}%</span>`;
        resultsDiv.style.display = 'block';
    }
</script>

</body>
</html>

